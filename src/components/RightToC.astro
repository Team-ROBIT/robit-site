---
// src/components/RightToC.astro

// 1. 전달받을 데이터의 타입을 정의합니다.
interface Props {
    headings: {
        depth: number;
        slug: string;
        text: string;
    }[];
}

// 2. 정의한 타입을 바탕으로 Props를 가져옵니다.
const { headings } = Astro.props;

// 이제 TypeScript가 h의 타입을 알게 되어 에러가 사라집니다.
const filteredHeadings = headings.filter((h) => h.depth >= 2 && h.depth <= 3);
---

<div class="space-y-4">
    <h4 class="text-sm font-bold text-zinc-900 dark:text-zinc-100 uppercase tracking-widest">
        On this page
    </h4>
    <ul class="text-sm space-y-3 text-zinc-500 dark:text-zinc-400 border-l border-zinc-200 dark:border-zinc-800">
        {filteredHeadings.map((h) => (
        <li class={`pl-4 ${h.depth === 3 ? 'ml-3 border-l border-zinc-100 dark:border-zinc-800' : ''}`}>
            <a 
            href={`#${h.slug}`} 
            class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors block"
            >
            {h.text}
            </a>
        </li>
        ))}
    </ul>
</div>