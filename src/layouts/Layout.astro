---
// src/layouts/DocsLayout.astro
import Sidebar from '../components/Sidebar.astro';
import RightToC from '../components/RightToC.astro';
import '../styles/global.css';

// 1. Props 타입을 정의하여 headings가 들어올 수 있음을 선언합니다.
interface Props {
  title: string;
  headings?: { depth: number; slug: string; text: string }[];
}

// 2. Astro.props에서 title과 headings를 가져옵니다. (기본값 빈 배열 설정)
const { title, headings = [] } = Astro.props;

// 3. 목차를 보여줄지 여부를 결정합니다.
const showToC = headings && headings.length > 0;
---
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <title>{title} | RO:BIT Archive</title>
</head>
<body class="bg-white dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100">
    <div class="flex min-h-screen">
        <aside class="w-64 border-r border-zinc-200 dark:border-zinc-800 sticky top-0 h-screen overflow-y-auto hidden md:block">
            <div class="p-6">
                <a href="/robit-site/" class="inline-block text-xl font-bold tracking-tighter text-zinc-900 dark:text-white mb-8">
                    ROːBIT <span class="text-blue-600">Archive</span>
                </a>
                <Sidebar /> 
            </div>
        </aside>

        <main class="flex-1 p-12 max-w-4xl mx-auto">
            <header class="mb-8">
                <h1 class="text-4xl font-bold tracking-tight">{title}</h1>
            </header>
            <article class="prose dark:prose-invert max-w-none">
                <slot /> 
            </article>
        </main>

        {showToC && (
            <aside class="w-64 hidden xl:block sticky top-0 h-screen p-6">
                <RightToC headings={headings} />
            </aside>
        )}
    </div>
</body>
</html>

<style is:global>
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-thumb { background-color: #d4d4d8; border-radius: 9999px; }
    @media (prefers-color-scheme: dark) {
        ::-webkit-scrollbar-thumb { background-color: #3f3f46; }
    }
</style>