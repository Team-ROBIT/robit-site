---
// src/layouts/DocsLayout.astro
import Sidebar from '../components/Sidebar.astro';
import RightToC from '../components/RightToC.astro';
import '../styles/global.css';

interface Props {
    title: string;
    // 1. 마크다운에서 추출한 headings 타입을 추가합니다 (선택 사항)
    headings?: { depth: number; slug: string; text: string }[];
	isDocs?: boolean; // 추가: 마크다운 문서인지 여부
}

const { title, headings, isDocs = true} = Astro.props;

// 2. 목차를 보여줄지 결정하는 로직: headings가 있고, 실제 내용이 있을 때만 true
const showToC = headings && headings.length > 0;
---

<!doctype html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="description" content="RO:BIT Archive" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
        <title>{title} | RO:BIT Archive</title>
    </head>
    <body class="bg-white dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100">
        <div class="flex min-h-screen">
            <aside class="w-64 border-r border-zinc-200 dark:border-zinc-800 sticky top-0 h-screen overflow-y-auto hidden md:block">
                <div class="p-6">
                    <div class="mb-8 px-2">
                    <a 
                        href="/" 
                        class="inline-block text-xl font-bold tracking-tighter text-zinc-900 dark:text-white bg-transparent border-none p-0 cursor-pointer transition-opacity hover:opacity-80"
                    >
                        ROːBIT <span class="text-blue-600">Archive</span>
                    </a>
                    </div>
                    <Sidebar />
                </div>
            </aside>

            <main class="flex-1 px-6 py-12 md:px-12">
                <div class="max-w-4xl mx-auto">
                    <header class="mb-10">
                        <h1 class="text-4xl font-extrabold tracking-tight text-zinc-900 dark:text-zinc-50">
                            {title}
                        </h1>
                    </header>
                    <article class={isDocs ? "prose prose-zinc dark:prose-invert max-w-none" : ""}>
						<slot />
					</article>
                </div>
            </main>

            {showToC && (
                <aside class="w-64 hidden xl:block sticky top-0 h-screen p-8">
                    <RightToC headings={headings} />
                </aside>
            )}
        </div>
    </body>
</html>

<style is:global>
    ::-webkit-scrollbar {
        width: 6px;
    }
    ::-webkit-scrollbar-thumb {
        background-color: #d4d4d8;
        border-radius: 9999px;
    }
    @media (prefers-color-scheme: dark) {
        ::-webkit-scrollbar-thumb {
            background-color: #3f3f46;
        }
    }
</style>